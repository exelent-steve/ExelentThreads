<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ExelentThreads - Demo</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Main App Container -->
    <div class="app-container">
        <!-- Left Sidebar -->
        <aside class="sidebar">
            <!-- Logo -->
            <div class="sidebar-header">
                <a href="#" class="sidebar-logo">
                    <span class="sidebar-logo-text">üßµ ExelentThreads</span>
                </a>
            </div>

            <!-- New Topic Button -->
            <div class="sidebar-new-topic">
                <button id="new-topic-btn" class="btn">
                    <span>+</span>
                    <span>New Topic</span>
                </button>
            </div>

            <!-- Navigation -->
            <div class="sidebar-content">
                <!-- Conversations Section -->
                <div class="sidebar-section">
                    <div class="sidebar-section-title">Conversations</div>
                    <nav class="sidebar-nav">
                        <button class="sidebar-nav-item active" data-view="conversation">
                            <span class="sidebar-nav-icon">üí¨</span>
                            <span>Conversation</span>
                        </button>
                        <button class="sidebar-nav-item" data-view="table">
                            <span class="sidebar-nav-icon">üìä</span>
                            <span>Table</span>
                        </button>
                        <button class="sidebar-nav-item" data-view="board">
                            <span class="sidebar-nav-icon">üìã</span>
                            <span>Board</span>
                        </button>
                        <button class="sidebar-nav-item" data-view="timeline">
                            <span class="sidebar-nav-icon">üìÖ</span>
                            <span>Timeline</span>
                        </button>
                    </nav>
                </div>

                <!-- Dashboards Section -->
                <div class="sidebar-section">
                    <div class="sidebar-section-title">Dashboards</div>
                    <nav class="sidebar-nav">
                        <button class="sidebar-nav-item" data-view="activity">
                            <span class="sidebar-nav-icon">üî•</span>
                            <span>Activity Dashboard</span>
                        </button>
                        <button class="sidebar-nav-item" data-view="health">
                            <span class="sidebar-nav-icon">üè•</span>
                            <span>Topic Health</span>
                        </button>
                        <button class="sidebar-nav-item" data-view="team">
                            <span class="sidebar-nav-icon">üë•</span>
                            <span>Team Performance</span>
                        </button>
                        <button class="sidebar-nav-item" data-view="analytics">
                            <span class="sidebar-nav-icon">üß†</span>
                            <span>Decision Intelligence</span>
                        </button>
                    </nav>
                </div>
            </div>

            <!-- Footer Actions -->
            <div class="sidebar-footer">
                <nav class="sidebar-nav">
                    <button id="help-btn" class="sidebar-nav-item">
                        <span class="sidebar-nav-icon">‚ùì</span>
                        <span>Help</span>
                    </button>
                    <button id="ask-ai-btn" class="sidebar-nav-item">
                        <span class="sidebar-nav-icon">üîÆ</span>
                        <span>Ask AI</span>
                    </button>
                    <button id="export-btn" class="sidebar-nav-item">
                        <span class="sidebar-nav-icon">‚Üì</span>
                        <span>Export</span>
                    </button>
                </nav>
            </div>
        </aside>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Search Bar (moved here) -->
            <div class="content-header">
                <div class="search-container">
                    <input type="text" id="global-search" class="global-search-input" placeholder="üîç Search across all topics..." />
                </div>
            </div>

            <!-- View Container -->
            <main id="view-container" class="view-container">
                <!-- Active view renders here -->
            </main>
        </div>
    </div>

    <!-- Help Modal -->
    <div id="help-modal" class="search-modal hidden">
        <div class="search-modal-backdrop"></div>
        <div class="search-modal-content">
            <div class="search-modal-header">
                <h3>üí° How to Use ExelentThreads Demo</h3>
                <button class="search-modal-close" id="help-modal-close">‚úï</button>
            </div>
            <div class="search-modal-body">
                <div class="help-section">
                    <h4>üîÆ Ask AI Anything (NEW!)</h4>
                    <p><strong>How to use:</strong> Click the "üîÆ Ask AI Anything" button in the top-right header.</p>
                    <p>Ask natural language questions about ALL your conversations. Try:</p>
                    <div class="help-keywords">
                        <span class="help-keyword">"What did I decide about REST vs GraphQL?"</span>
                        <span class="help-keyword">"Database choices?"</span>
                        <span class="help-keyword">"How do I handle errors?"</span>
                    </div>
                    <p>Results show confidence percentages and highlight matching keywords.</p>
                </div>

                <div class="help-section">
                    <h4>üéØ Smart Suggestions with Confidence (NEW!)</h4>
                    <p><strong>How to use:</strong> Type in any message input box (Conversation view, Board, Table, Timeline, or modal).</p>
                    <p>As you type, related topics appear with confidence badges:</p>
                    <ul style="margin: 0.5rem 0 0 1.5rem; font-size: 0.875rem;">
                        <li><strong style="color: #166534;">High (70%+):</strong> Green badge with ‚úì - Very relevant</li>
                        <li><strong style="color: #92400e;">Medium (40-69%):</strong> Yellow badge with ‚óã - Somewhat relevant</li>
                        <li><strong style="color: #6b7280;">Low (<40%):</strong> Gray badge with ‚ñ≥ - Might not be relevant</li>
                    </ul>
                    <p style="margin-top: 0.75rem;">Try typing these keywords:</p>
                    <div class="help-keywords">
                        <span class="help-keyword">"error"</span>
                        <span class="help-keyword">"validation"</span>
                        <span class="help-keyword">"REST"</span>
                        <span class="help-keyword">"API"</span>
                        <span class="help-keyword">"GraphQL"</span>
                        <span class="help-keyword">"database"</span>
                        <span class="help-keyword">"PostgreSQL"</span>
                        <span class="help-keyword">"monolith"</span>
                    </div>
                </div>

                <div class="help-section">
                    <h4>üîó Topic Merge Suggestions (NEW!)</h4>
                    <p><strong>How to use:</strong> Click the "üìà Analytics" tab, then scroll down to see "Topic Merge Suggestions".</p>
                    <p>AI automatically detects similar topics that could be combined based on:</p>
                    <ul style="margin: 0.5rem 0 0 1.5rem; font-size: 0.875rem;">
                        <li>Explicit related topics links (25 points each)</li>
                        <li>Same category (25 points)</li>
                        <li>Similar titles (30 points)</li>
                        <li>Overlapping content (20 points)</li>
                        <li>Needs 50%+ similarity to suggest merge</li>
                    </ul>
                    <p style="margin-top: 0.75rem;">Each suggestion shows similarity %, reason, topics to merge, and "Preview Merge" button.</p>
                </div>

                <div class="help-section">
                    <h4>üîç Global Search</h4>
                    <p>Use the search bar at the top to find topics across all conversations. Try:</p>
                    <div class="help-keywords">
                        <span class="help-keyword">"confidence score"</span>
                        <span class="help-keyword">"team familiarity"</span>
                        <span class="help-keyword">"graceful fallback"</span>
                    </div>
                </div>

                <div class="help-section">
                    <h4>üìà Analytics Dashboard</h4>
                    <p>Click the "Analytics" tab to see patterns the system has learned about your preferences, including decision patterns, work style analysis, and merge suggestions.</p>
                </div>

                <div class="help-section">
                    <h4>‚ö†Ô∏è Contradiction Detector</h4>
                    <p>Look for the topic titled <strong>"CONTRADICTION: GraphQL for admin panel"</strong> to see conflict detection in action.</p>
                </div>

                <div class="help-section">
                    <h4>üîó Related Topics</h4>
                    <p>Topics with a üîó icon in the sidebar have related discussions. Click any topic to see the blue "Related" bar at the top.</p>
                </div>

                <div class="help-section">
                    <h4>üìÖ Timeline View</h4>
                    <p>Click the "Timeline" tab to see your topics in a visual cascading waterfall layout.</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Search Results Modal -->
    <div id="search-modal" class="search-modal hidden">
        <div class="search-modal-backdrop"></div>
        <div class="search-modal-content">
            <div class="search-modal-header">
                <h3>Search Results</h3>
                <button class="search-modal-close" id="search-modal-close">‚úï</button>
            </div>
            <div class="search-modal-body" id="search-results"></div>
        </div>
    </div>

    <!-- Topic Detail Modal (Trello-style) -->
    <div id="topic-detail-modal" class="topic-modal hidden">
        <div class="topic-modal-backdrop"></div>
        <div class="topic-modal-content">
            <div class="topic-modal-header">
                <div id="topic-modal-title"></div>
                <button class="search-modal-close" id="topic-modal-close">‚úï</button>
            </div>
            <div class="topic-modal-body" id="topic-modal-body"></div>
        </div>
    </div>

    <!-- Ask AI Modal -->
    <div id="ask-ai-modal" class="search-modal hidden">
        <div class="search-modal-backdrop"></div>
        <div class="search-modal-content ask-ai-modal-content">
            <div class="search-modal-header">
                <h3>üîÆ Ask AI Anything</h3>
                <button class="search-modal-close" id="ask-ai-modal-close">‚úï</button>
            </div>
            <div class="search-modal-body">
                <div class="ask-ai-input-section">
                    <p class="ask-ai-description">Ask a question about anything you've discussed across all your conversations</p>
                    <div class="ask-ai-input-group">
                        <input type="text" id="ask-ai-input" class="ask-ai-input" placeholder='Try: "What did I decide about authentication?" or "Have I discussed database scaling?"'>
                        <button class="btn btn-primary" id="ask-ai-search-btn">Ask AI</button>
                    </div>
                    <div class="ask-ai-examples">
                        <span class="ask-ai-example-label">Examples:</span>
                        <button class="ask-ai-example" data-question="What did I decide about REST vs GraphQL?">REST vs GraphQL?</button>
                        <button class="ask-ai-example" data-question="What database choices have I made?">Database choices?</button>
                        <button class="ask-ai-example" data-question="How do I handle errors?">Error handling?</button>
                    </div>
                </div>
                <div id="ask-ai-results" class="ask-ai-results"></div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="toast-container"></div>

    <!-- Scripts -->
    <script src="data.js"></script>
    <script src="utils.js"></script>
    <script src="conversation-view.js"></script>
    <script src="table-view.js"></script>
    <script src="board-view.js"></script>
    <script src="analytics-view.js"></script>
    <script src="timeline-view.js"></script>
    <script src="app.js"></script>
</body>
</html>
